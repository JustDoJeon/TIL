------

# About Spring *Interceptor*

â— Interceptorê°€ ë­ì£ ?  <BR>

```
Interceptorë€ ì»¨íŠ¸ë¡¤ëŸ¬ì— ë“¤ì–´ì˜¤ëŠ” ìš”ì²­ (HttpRequest)ì™€ 
ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ì‘ë‹µí•˜ëŠ” HttpResponseë¥¼ ê°€ë¡œì±„ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.
```

------

## *\*ğŸ’¡\**ê·¸ëŸ¼ Filterì™€ Interceptorì˜ ì°¨ì´ì ì€ ë­ì£ ?

![](https://t1.daumcdn.net/cfile/tistory/992590395ABF406F18)
1) í˜¸ì¶œ ì‹œì 
- FilterëŠ” DispatcherServletì´ ì‹¤í–‰ë˜ê¸° ì „, IntercpetorëŠ” DistpatcherServletì´ ì‹¤í–‰ëœ í›„ì— í˜¸ì¶œë˜ëŠ” ì°¨ì´ê°€ ìˆìŠµë‹ˆë‹¤. <br>

2) ì„¤ì • ìœ„ì¹˜
- FilterëŠ” web.xmlì—ì„œ ì„¤ì •í•˜ê³ , InterceptorëŠ” spring-servlet.xmlì—ì„œ ì„¤ì •í•©ë‹ˆë‹¤.<br>

3) êµ¬í˜„ ë°©ì‹
- FilterëŠ” web.xmlì—ì„œ ì„¤ì •ì„ í•˜ë©´ êµ¬í˜„ì´ ê°€ëŠ¥í•˜ì§€ë§Œ, InterceptorëŠ” ì„¤ì •ì„ í•˜ê³  ë©”ì„œë“œ êµ¬í˜„ì„ í•´ì•¼ í•©ë‹ˆë‹¤.

<h5>HandlerInterceptor ë€?</h5>

```
ì¸í„°ì…‰í„° ê´€ë ¨ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ë•Œ ìƒì†ë°›ì•„ì„œ ì‘ì„±í•˜ëŠ” í´ë˜ìŠ¤, íŠ¹ì •í•œ URI í˜¸ì¶œì„ 'ê°€ë¡œì±„ëŠ”' ì—­í• ì„ í•©ë‹ˆë‹¤.
ì´ë¥¼ ì´ìš©í•˜ì—¬ ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ë¡œì§ì„ ìˆ˜ì •í•˜ì§€ ì•Šê³ ë„, ì‚¬ì „ì´ë‚˜ ì‚¬í›„ ì œì–´ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.

* HandlerInterceptor ë©”ì†Œë“œ
1) preHanlde(request, response, handler)
- ì§€ì •ëœ ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ë™ì‘ ì´ì „ì— ìˆ˜í–‰í•  ë™ì‘ (ì‚¬ì „ ì œì–´)

2) afterCompletion(request, response, hanlder)
- Dispatcher Servletì˜ í™”ë©´ ì²˜ë¦¬ê°€ ì™„ë£Œëœ ì´í›„ ì²˜ë¦¬í•  ë™ì‘ 
```

```
```

------

## *\*ğŸ’¡\** HandlerInterceptor ì‚¬ìš© ì„¤ì •  

<h5>SampleInterceptor í´ë˜ìŠ¤</h5>

```java
package org.sample.interceptor;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.springframework.web.servlet.ModelAndView;
import org.springframework.web.servlet.handler.HandlerInterceptorAdapter;

public class SampleInterceptor extends HandlerInterceptorAdaptor {
    
    @Override
    public boolean preHandler(
    	HttpServletRequest request, 
    	HttpServletResponse response,
        Object handler) throws Exception {
        
        System.out.println("pre handle........");
        
        return true;
    }

    @Override
    public void postHandler(
    	HttpServletRequest request, 
    	HttpServletResponse response,
        Object handler,
        ModelAndView modelAndView) throws Exception {
        
        System.out.println("post handle.......");
    }
}
```

  <H6>servlet-context.xml</H6>
  
```xml
<beans:bean id="sampleInterceptor" 
            class="org.sample.interceptor.SampleInterceptor"/>

<interceptors>
  <interceptor>
    <mapping path="/doA"/>
    <mapping path="/doB"/>
    <beans:ref bean="sampleInterceptor"/>
  </interceptor>
</interceptors>
```

## ***\*ğŸ’¡\**Filter, Interceptor, AOPì˜ íë¦„

![](https://t1.daumcdn.net/cfile/tistory/9983FB455BB4E5D30C)

  â— Interceptorì™€ FilterëŠ” Servlet  ë‹¨ìœ„ì—ì„œ ì‹¤í–‰ëœë‹¤. ë°˜ë©´ AOPëŠ” ë©”ì†Œë“œ ì•ì— ProxyíŒ¨í„´ì˜ í˜•íƒœë¡œ ì‹¤í–‰ëœë‹¤. <br>

 â— ìš”ì²­ì´ ë“¤ì–´ì˜¤ë©´ Filter -> Interceptor -> AOP -> Interceptor -> Filter ìˆœìœ¼ë¡œ  ê±°ì¹˜ê²Œëœë‹¤.<br>

  1. ì„œë²„ë¥¼ ì‹¤í–‰ì‹œì¼œ ì„œë¸”ë¦¿ì´ ì˜¬ë¼ì˜¤ëŠ” ë™ì•ˆì— initì´ ì‹¤í–‰ë˜ê³ , ê·¸ í›„ doFilterê°€ ì‹¤í–‰ëœë‹¤.

2. ì»¨íŠ¸ë¡¤ëŸ¬ì— ë“¤ì–´ê°€ê¸° ì „ preHandlerê°€ ì‹¤í–‰ëœë‹¤

3. ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ë‚˜ì™€ postHandler, after Completion, doFilter ìˆœìœ¼ë¡œ ì§„í–‰ì´ ëœë‹¤.

4. ì„œë¸”ë¦¿ ì¢…ë£Œ ì‹œ destroyê°€ ì‹¤í–‰ëœë‹¤.


# Referece

â— https://victorydntmd.tistory.com/176  

â— https://rongscodinghistory.tistory.com/2

â— https://goddaehee.tistory.com/154